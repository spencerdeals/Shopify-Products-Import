<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDL Instant Imports - Ocean Freight Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f5;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* INTRO PAGE STYLES */
        .intro-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 100vh;
            padding: 20px;
        }

        .intro-page.hidden {
            display: none;
        }

        .intro-hero {
            background: linear-gradient(135deg, #7cb342 0%, #2e7d32 100%);
            color: white;
            padding: 40px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(124, 179, 66, 0.3);
        }

        .intro-hero h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .ship-icon {
            font-size: 36px;
        }

        .intro-subtitle {
            font-size: 16px;
            opacity: 0.95;
            line-height: 1.4;
            margin-bottom: 0;
        }

        .steps-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 600px;
        }

        .step-card {
            background: linear-gradient(135deg, rgba(124, 179, 66, 0.1) 0%, rgba(46, 125, 50, 0.1) 100%);
            border: 2px solid rgba(124, 179, 66, 0.2);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .step-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(124, 179, 66, 0.2);
            border-color: #7cb342;
        }

        .step-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .step-title {
            font-size: 16px;
            font-weight: 600;
            color: #2e7d32;
            margin: 0;
        }

        .start-button {
            background: linear-gradient(135deg, #7cb342 0%, #2e7d32 100%);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(124, 179, 66, 0.3);
            width: 100%;
            max-width: 300px;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(124, 179, 66, 0.4);
        }

        /* CALCULATOR STYLES */
        .calculator-page {
            display: none;
            background: white;
            min-height: 100vh;
            padding: 0;
            animation: fadeIn 0.5s ease;
        }

        .calculator-page.active {
            display: block;
        }

        .calculator-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
            text-align: center;
            font-weight: 700;
        }

        .new-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
            color: white;
            font-size: 14px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            margin-left: 10px;
            animation: pulse-new 2s infinite;
            box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
            vertical-align: super;
            letter-spacing: 1px;
        }

        @keyframes pulse-new {
            0% {
                transform: scale(1);
                box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 2px 20px rgba(255, 0, 0, 0.6);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
            }
        }

        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 25px;
            font-size: 15px;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }

        .progress-step {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }

        .progress-circle {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-right: 8px;
            transition: all 0.3s ease;
        }

        .progress-circle.active {
            background-color: #7cb342;
            color: white;
            transform: scale(1.1);
        }

        .progress-circle.completed {
            background-color: #4caf50;
            color: white;
        }

        .progress-line {
            width: 50px;
            height: 3px;
            background-color: #e0e0e0;
            margin: 0 5px;
            transition: all 0.3s ease;
        }

        .progress-line.completed {
            background-color: #4caf50;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .warning-box {
            background: linear-gradient(to right, #fff8e1 0%, transparent 100%);
            border-left: 4px solid #ffa726;
            padding: 15px;
            margin-bottom: 25px;
        }

        .warning-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            color: #e65100;
            font-weight: 600;
            font-size: 15px;
        }

        .warning-header::before {
            content: '‚ö†Ô∏è';
            margin-right: 8px;
            font-size: 18px;
        }

        .warning-text {
            color: #bf360c;
            line-height: 1.5;
            font-size: 14px;
        }

        .critical-warning {
            background: linear-gradient(to right, #ffebee 0%, transparent 100%);
            border-left: 4px solid #f44336;
            padding: 20px;
            margin-bottom: 25px;
        }

        .critical-warning .warning-header {
            color: #c62828;
            font-size: 16px;
        }

        .critical-warning .warning-text {
            color: #c62828;
            font-weight: 500;
        }

        .forwarder-address {
            background: linear-gradient(to right, #e8f5e9 0%, transparent 100%);
            border-left: 4px solid #66bb6a;
            padding: 20px;
            margin-bottom: 25px;
        }

        .forwarder-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            color: #2e7d32;
            font-weight: 600;
            font-size: 16px;
        }

        .forwarder-header::before {
            content: 'üöö';
            margin-right: 8px;
            font-size: 20px;
        }

        .forwarder-name {
            color: #2e7d32;
            font-weight: 700;
            font-size: 20px;
            margin-bottom: 8px;
        }

        .forwarder-details {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
            font-size: 15px;
        }

        .forwarder-note {
            color: #2e7d32;
            font-weight: 700;
            font-size: 15px;
            margin-top: 15px;
            padding: 12px 0 0 0;
            border-top: 1px solid rgba(76, 175, 80, 0.3);
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #555;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        input, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: white;
            font-family: inherit;
        }

        textarea {
            min-height: 150px;
            resize: vertical;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #7cb342;
            box-shadow: 0 0 0 2px rgba(124, 179, 66, 0.1);
        }

        button {
            padding: 15px 30px;
            background: linear-gradient(135deg, #7cb342 0%, #2e7d32 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(124, 179, 66, 0.3);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .secondary-btn {
            background: linear-gradient(135deg, #90a4ae 0%, #607d8b 100%);
        }

        /* VENDOR GROUP STYLES */
        .vendor-group {
            border-left: 4px solid;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .vendor-group:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .vendor-group.amazon {
            background: linear-gradient(to right, rgba(255, 243, 224, 0.5) 0%, transparent 100%);
            border-left-color: #ff9800;
        }

        .vendor-group.wayfair {
            background: linear-gradient(to right, rgba(243, 229, 245, 0.5) 0%, transparent 100%);
            border-left-color: #ba68c8;
        }

        .vendor-group.walmart {
            background: linear-gradient(to right, rgba(227, 242, 253, 0.5) 0%, transparent 100%);
            border-left-color: #2196f3;
        }

        .vendor-group.target {
            background: linear-gradient(to right, rgba(255, 235, 238, 0.5) 0%, transparent 100%);
            border-left-color: #f44336;
        }

        .vendor-group.default {
            background: linear-gradient(to right, rgba(245, 245, 245, 0.5) 0%, transparent 100%);
            border-left-color: #9e9e9e;
        }

        .vendor-header {
            font-weight: 700;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .vendor-header.amazon { color: #e65100; }
        .vendor-header.wayfair { color: #6a1b9a; }
        .vendor-header.walmart { color: #1565c0; }
        .vendor-header.target { color: #c62828; }
        .vendor-header.default { color: #616161; }

        .vendor-header::before {
            content: 'üè™';
            margin-right: 10px;
            font-size: 24px;
        }

        /* PRODUCT ITEM STYLES */
        .product-item {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .product-item:hover {
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .product-item.amazon { border-left-color: #ff9800; }
        .product-item.wayfair { border-left-color: #ba68c8; }
        .product-item.walmart { border-left-color: #2196f3; }
        .product-item.target { border-left-color: #f44336; }
        .product-item.default { border-left-color: #9e9e9e; }

        .product-item.confirmed {
            background: linear-gradient(to right, rgba(200, 255, 200, 0.2) 0%, rgba(255, 255, 255, 0.5) 100%);
            border-left-color: #4caf50;
        }

        .product-item.deleted {
            opacity: 0.3;
            pointer-events: none;
            text-decoration: line-through;
            transform: scale(0.95);
        }

        .product-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .product-image:hover {
            transform: scale(1.05);
            border-color: #7cb342;
        }

        .product-details {
            flex-grow: 1;
        }

        .product-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 15px;
            line-height: 1.4;
        }

        .product-name a {
            color: inherit;
            text-decoration: none;
            border-bottom: 1px dashed #666;
            transition: all 0.3s ease;
        }

        .product-name a:hover {
            color: #2196f3;
            border-bottom-color: #2196f3;
        }

        /* VARIANT STYLING */
        .product-variant {
            display: inline-block;
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
            box-shadow: 0 2px 5px rgba(255, 152, 0, 0.3);
        }

        .product-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
        }

        .product-info span {
            display: inline-block;
            margin-right: 15px;
        }

        /* QUANTITY SELECTOR STYLES */
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(124, 179, 66, 0.05);
            border-radius: 4px;
        }

        .quantity-label {
            font-size: 14px;
            font-weight: 600;
            color: #555;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #7cb342;
            background: white;
            color: #7cb342;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            padding: 0;
            margin: 0;
        }

        .qty-btn:hover {
            background: #7cb342;
            color: white;
            transform: scale(1.1);
        }

        .qty-display {
            width: 50px;
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
        }

        /* PRICE INPUT STYLES */
        .price-input-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 2px;
            padding: 12px;
            margin-top: 10px;
            border-left: 2px solid #e0e0e0;
        }

        .price-input-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            display: block;
            font-weight: 500;
        }

        .price-found {
            color: #2e7d32;
            font-weight: 600;
        }

        .price-missing {
            color: #f44336;
            font-weight: 600;
        }

        .price-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .price-input {
            display: flex;
            align-items: center;
            gap: 5px;
            flex: 1;
        }

        .price-input span {
            font-size: 18px;
            color: #666;
            font-weight: 500;
        }

        .price-input input {
            width: 120px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 2px;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .price-input input.has-value {
            background: #f0f9ff;
            border-color: #2196f3;
        }

        .price-input input.confirmed {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .price-input input:disabled {
            background: #f5f5f5;
            cursor: not-allowed;
            opacity: 0.8;
        }

        .price-buttons {
            display: flex;
            gap: 8px;
        }

        .price-btn {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 2px;
            min-width: 80px;
            transition: all 0.3s ease;
        }

        .check-price-btn {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
        }

        .check-price-btn:hover {
            background: linear-gradient(135deg, #1e88e5 0%, #1565c0 100%);
        }

        .confirm-price-btn {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
        }

        .confirm-price-btn:hover {
            background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);
        }

        .confirm-price-btn.confirmed {
            background: linear-gradient(135deg, #81c784 0%, #66bb6a 100%);
            cursor: default;
        }

        .price-status {
            font-size: 12px;
            margin-top: 8px;
            font-weight: 600;
            padding: 5px 8px;
            border-radius: 2px;
            display: inline-block;
        }

        .price-status.confirmed {
            color: #2e7d32;
            background: rgba(76, 175, 80, 0.1);
        }

        .price-status.pending {
            color: #f57c00;
            background: rgba(255, 152, 0, 0.1);
        }

        .price-status.required {
            color: #c62828;
            background: rgba(244, 67, 54, 0.1);
        }

        /* DELIVERY FEE STYLES */
        .delivery-fee-input {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid;
            margin-top: 20px;
            padding: 18px;
        }

        .delivery-fee-input.amazon { border-left-color: #ff9800; }
        .delivery-fee-input.wayfair { border-left-color: #ba68c8; }
        .delivery-fee-input.walmart { border-left-color: #2196f3; }
        .delivery-fee-input.target { border-left-color: #f44336; }
        .delivery-fee-input.default { border-left-color: #9e9e9e; }

        .delivery-fee-input label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }

        .delivery-fee-input small {
            color: #666;
            font-size: 12px;
        }

        .delivery-fee-input input {
            background: white;
            margin-top: 10px;
        }

        /* COST SUMMARY STYLES */
        .product-cost-summary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 250, 250, 0.95) 100%);
            border-left: 3px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            display: none;
            box-shadow: 0 1px 5px rgba(76, 175, 80, 0.1);
        }

        .product-cost-summary.visible {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cost-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            padding: 4px 0;
        }

        .cost-summary-total {
            font-weight: 700;
            font-size: 17px;
            color: #2e7d32;
            border-top: 2px solid #4caf50;
            padding-top: 10px;
            margin-top: 10px;
        }

        .delete-product-btn {
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
            padding: 10px 20px;
            margin-top: 12px;
            font-size: 14px;
            width: 100%;
            border-radius: 2px;
        }

        .delete-product-btn:hover {
            background: linear-gradient(135deg, #e53935 0%, #b71c1c 100%);
            transform: scale(1.02);
        }

        /* FINAL BREAKDOWN STYLES */
        .cost-breakdown {
            background: transparent;
            border-left: 4px solid #7cb342;
            padding: 25px;
            margin-bottom: 25px;
        }

        .cost-breakdown h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 18px;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
        }

        .product-breakdown-item {
            background: #f9f9f9;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 2px;
            border-left: 3px solid #7cb342;
        }

        .product-breakdown-name {
            font-weight: 600;
            margin-bottom: 6px;
            color: #333;
        }

        .product-breakdown-details {
            font-size: 13px;
            color: #666;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .product-breakdown-total {
            color: #2e7d32;
            font-weight: 700;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .cost-item:last-child {
            border-bottom: none;
        }

        .cost-label {
            color: #555;
            font-size: 15px;
        }

        .cost-value {
            color: #333;
            font-weight: 600;
            font-size: 15px;
        }

        .total-row {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 3px solid #7cb342;
            background: linear-gradient(135deg, rgba(124, 179, 66, 0.05) 0%, rgba(46, 125, 50, 0.05) 100%);
            padding: 20px;
        }

        .total-row .cost-label {
            font-size: 20px;
            color: #333;
            font-weight: 700;
        }

        .total-row .cost-value {
            font-size: 24px;
            color: #2e7d32;
            font-weight: 700;
        }

        .confirmation-checkbox {
            background: linear-gradient(to right, rgba(255, 243, 224, 0.5) 0%, transparent 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin-bottom: 25px;
        }

        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .checkbox-container input[type="checkbox"] {
            margin-top: 4px;
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            cursor: pointer;
        }

        .checkbox-label {
            color: #e65100;
            font-size: 14px;
            line-height: 1.6;
            cursor: pointer;
        }

        .checkbox-label strong {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
        }

        /* LOADING AND ERROR STYLES */
        .loading {
            display: none;
            text-align: center;
            margin: 40px 0;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #7cb342;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            color: #666;
            font-size: 15px;
            line-height: 1.5;
        }

        .error {
            display: none;
            background: linear-gradient(to right, #ffebee 0%, transparent 100%);
            border-left: 4px solid #f44336;
            color: #c62828;
            padding: 15px;
            margin: 20px 0;
        }

        .error.active {
            display: block;
        }

        .info-text {
            color: #999;
            font-size: 11px;
            text-align: center;
            margin-top: 40px;
            line-height: 1.5;
        }

        /* MOBILE STYLES */
        @media (max-width: 768px) {
            .intro-page {
                padding: 15px;
            }
            
            .intro-hero {
                padding: 25px 20px;
                margin-bottom: 20px;
            }
            
            .intro-hero h1 {
                font-size: 22px;
                flex-direction: column;
                gap: 8px;
            }
            
            .ship-icon {
                font-size: 28px;
            }
            
            .intro-subtitle {
                font-size: 14px;
            }
            
            .steps-container {
                gap: 12px;
                margin-bottom: 25px;
            }
            
            .step-card {
                padding: 15px;
                flex-direction: row;
                align-items: center;
                justify-content: flex-start;
                gap: 15px;
            }
            
            .step-icon {
                font-size: 32px;
                margin-bottom: 0;
            }
            
            .step-title {
                font-size: 15px;
                text-align: left;
            }
            
            .start-button {
                padding: 15px 30px;
                font-size: 16px;
                width: 100%;
                max-width: 280px;
            }
            
            .calculator-content {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 20px;
                margin-bottom: 8px;
            }
            
            .new-badge {
                font-size: 11px;
                padding: 2px 6px;
                margin-left: 5px;
            }
            
            .subtitle {
                font-size: 13px;
                margin-bottom: 20px;
                padding: 0;
                line-height: 1.4;
            }
            
            .progress-bar {
                padding: 12px 0;
                margin-bottom: 20px;
                justify-content: space-around;
            }
            
            .progress-step {
                flex-direction: column;
                align-items: center;
                margin: 0;
                padding: 0 5px;
            }
            
            .progress-step span {
                font-size: 10px;
                text-align: center;
                margin-top: 5px;
                white-space: nowrap;
            }
            
            .progress-circle {
                width: 28px;
                height: 28px;
                font-size: 12px;
                margin-right: 0;
            }
            
            .progress-line {
                display: none;
            }
            
            .product-item {
                flex-direction: column;
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .product-image {
                width: 100%;
                height: 200px;
                margin-bottom: 12px;
            }
            
            .product-name {
                font-size: 14px;
                margin-bottom: 6px;
            }
            
            .product-variant {
                font-size: 11px;
                padding: 2px 6px;
                margin-left: 5px;
            }
            
            .price-input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .price-input {
                width: 100%;
            }
            
            .price-input input {
                width: 100%;
                font-size: 16px;
            }
            
            .price-buttons {
                width: 100%;
                display: flex;
                gap: 8px;
            }
            
            .price-btn {
                flex: 1;
                padding: 10px 12px;
                font-size: 12px;
            }
            
            .button-group {
                flex-direction: column;
                gap: 10px;
                margin-top: 20px;
            }
            
            .button-group button {
                width: 100%;
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <!-- INTRO PAGE -->
    <div class="intro-page" id="introPage">
        <div class="intro-hero">
            <h1>
                <span class="ship-icon">üö¢</span>
                SDL Instant Import Calculator
            </h1>
            <p class="intro-subtitle">Get exact shipping costs for your Bermuda imports in minutes</p>
        </div>
        
        <div class="steps-container">
            <div class="step-card">
                <span class="step-icon">üìã</span>
                <h3 class="step-title">Add Product URLs</h3>
            </div>
            <div class="step-card">
                <span class="step-icon">üí∞</span>
                <h3 class="step-title">Verify Prices & Fees</h3>
            </div>
            <div class="step-card">
                <span class="step-icon">üöö</span>
                <h3 class="step-title">Place Your Order</h3>
            </div>
        </div>
        
        <button class="start-button" onclick="startCalculator()">
            Start Now
        </button>
    </div>

    <!-- CALCULATOR PAGE -->
    <div class="calculator-page" id="calculatorPage">
        <div class="calculator-content">
            <h1>Instant Imports <span class="new-badge">NEW</span></h1>
            <p class="subtitle">Ocean Freight Calculator - Get accurate shipping costs for your Bermuda imports</p>
            
            <div class="progress-bar">
                <div class="progress-step">
                    <div class="progress-circle active" id="step1">1</div>
                    <span>Add Products</span>
                </div>
                <div class="progress-line" id="line1"></div>
                <div class="progress-step">
                    <div class="progress-circle" id="step2">2</div>
                    <span>Review & Fees</span>
                </div>
                <div class="progress-line" id="line2"></div>
                <div class="progress-step">
                    <div class="progress-circle" id="step3">3</div>
                    <span>Confirm Order</span>
                </div>
            </div>

            <!-- PAGE 1: Add Products -->
            <div class="page active" id="page1">
                <div class="warning-box">
                    <div class="warning-header">Important: Select Correct Variants</div>
                    <div class="warning-text">
                        When adding products, make sure to select the exact size, color, and variant you want before copying the URL. The price and shipping calculations depend on the specific variant selected.
                    </div>
                </div>

                <div class="input-group">
                    <label for="productUrls">Product URLs (one per line)</label>
                    <textarea id="productUrls" placeholder="Paste your product URLs here, one per line...

Example:
https://www.amazon.com/dp/B08N5WRWNW
https://www.wayfair.com/furniture/pdp/...
https://www.walmart.com/ip/..."></textarea>
                </div>

                <div class="button-group">
                    <button onclick="addProducts()">Add Products</button>
                </div>

                <div class="loading" id="loading1">
                    <div class="spinner"></div>
                    <div class="loading-text">
                        Fetching product information...<br>
                        <small>This may take a few moments</small>
                    </div>
                </div>

                <div class="error" id="error1"></div>

                <div id="productList"></div>
            </div>

            <!-- PAGE 2: Review Products & Delivery Fees -->
            <div class="page" id="page2">
                <div class="critical-warning">
                    <div class="warning-header">Critical: Verify All Information</div>
                    <div class="warning-text">
                        Please carefully verify all product prices and delivery fees before proceeding. These will be used for your final shipping calculation and order placement.
                    </div>
                </div>

                <div id="reviewProductList"></div>

                <div class="button-group">
                    <button class="secondary-btn" onclick="goToPage(1)">‚Üê Back</button>
                    <button onclick="goToPage(3)" id="proceedBtn" disabled>Proceed to Order ‚Üí</button>
                </div>
            </div>

            <!-- PAGE 3: Final Order -->
            <div class="page" id="page3">
                <div class="forwarder-address">
                    <div class="forwarder-header">Ship to Our US Forwarder</div>
                    <div class="forwarder-name">SDL Instant Imports</div>
                    <div class="forwarder-details">
                        123 Shipping Lane<br>
                        Miami, FL 33101<br>
                        United States<br>
                        Phone: (305) 555-0123
                    </div>
                    <div class="forwarder-note">
                        Use this address as your shipping destination when placing orders
                    </div>
                </div>

                <div class="cost-breakdown" id="finalBreakdown">
                    <h3>üìä Final Cost Breakdown</h3>
                    <!-- Cost breakdown will be populated here -->
                </div>

                <div class="confirmation-checkbox">
                    <div class="checkbox-container">
                        <input type="checkbox" id="confirmOrder" onchange="toggleOrderButton()">
                        <label for="confirmOrder" class="checkbox-label">
                            <strong>I confirm that I want to proceed with this order</strong>
                            I understand that SDL Instant Imports will purchase these items on my behalf and ship them to Bermuda via ocean freight. The total cost shown above is final and includes all fees.
                        </label>
                    </div>
                </div>

                <div class="input-group">
                    <label for="customerInfo">Your Contact Information</label>
                    <textarea id="customerInfo" placeholder="Please provide:
- Full Name
- Phone Number  
- Email Address
- Delivery Address in Bermuda
- Any special instructions"></textarea>
                </div>

                <div class="button-group">
                    <button class="secondary-btn" onclick="goToPage(2)">‚Üê Back</button>
                    <button onclick="placeOrder()" id="orderBtn" disabled>Place Order</button>
                </div>

                <div class="loading" id="loading3">
                    <div class="spinner"></div>
                    <div class="loading-text">
                        Placing your order...<br>
                        <small>Please wait while we process your request</small>
                    </div>
                </div>

                <div class="error" id="error3"></div>
            </div>
        </div>

        <div class="info-text">
            SDL Instant Imports - Ocean Freight Calculator v2.0<br>
            For support, contact us at support@sdlinstantimports.com
        </div>
    </div>

    <script>
        // Global variables
        let products = [];
        let currentPage = 1;

        // Shipping rates and fees
        const OCEAN_FREIGHT_RATE = 2.50; // per lb
        const PROCESSING_FEE = 25.00; // flat fee
        const CUSTOMS_RATE = 0.25; // 25% of product value
        const FUEL_SURCHARGE_RATE = 0.15; // 15% of freight cost

        // Product scraping function
        async function scrapeProduct(url) {
            try {
                const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent(url));
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                let product = {
                    url: url,
                    vendor: getVendorFromUrl(url),
                    name: '',
                    price: 0,
                    image: '',
                    weight: 5, // default weight in lbs
                    quantity: 1,
                    deliveryFee: 0,
                    priceConfirmed: false,
                    variant: ''
                };

                // Amazon scraping
                if (url.includes('amazon.com')) {
                    product.name = doc.querySelector('#productTitle')?.textContent?.trim() || 'Amazon Product';
                    const priceElement = doc.querySelector('.a-price-whole') || doc.querySelector('.a-offscreen');
                    if (priceElement) {
                        product.price = parseFloat(priceElement.textContent.replace(/[^0-9.]/g, ''));
                    }
                    product.image = doc.querySelector('#landingImage')?.src || doc.querySelector('.a-dynamic-image')?.src || '';
                    
                    // Try to get variant info
                    const variantElement = doc.querySelector('#variation_color_name .selection') || 
                                         doc.querySelector('#variation_size_name .selection');
                    if (variantElement) {
                        product.variant = variantElement.textContent.trim();
                    }
                }
                
                // Wayfair scraping
                else if (url.includes('wayfair.com')) {
                    product.name = doc.querySelector('[data-enzyme-id="ProductTitle"]')?.textContent?.trim() || 'Wayfair Product';
                    const priceElement = doc.querySelector('[data-enzyme-id="PriceDisplay"]');
                    if (priceElement) {
                        product.price = parseFloat(priceElement.textContent.replace(/[^0-9.]/g, ''));
                    }
                    product.image = doc.querySelector('[data-enzyme-id="ProductImageCarousel"] img')?.src || '';
                }
                
                // Walmart scraping
                else if (url.includes('walmart.com')) {
                    product.name = doc.querySelector('[data-automation-id="product-title"]')?.textContent?.trim() || 'Walmart Product';
                    const priceElement = doc.querySelector('[itemprop="price"]') || doc.querySelector('[data-automation-id="product-price"]');
                    if (priceElement) {
                        product.price = parseFloat(priceElement.textContent.replace(/[^0-9.]/g, ''));
                    }
                    product.image = doc.querySelector('[data-automation-id="hero-image"] img')?.src || '';
                }
                
                // Target scraping
                else if (url.includes('target.com')) {
                    product.name = doc.querySelector('[data-test="product-title"]')?.textContent?.trim() || 'Target Product';
                    const priceElement = doc.querySelector('[data-test="product-price"]');
                    if (priceElement) {
                        product.price = parseFloat(priceElement.textContent.replace(/[^0-9.]/g, ''));
                    }
                    product.image = doc.querySelector('[data-test="hero-image-desktop"] img')?.src || '';
                }

                return product;
            } catch (error) {
                console.error('Error scraping product:', error);
                return {
                    url: url,
                    vendor: getVendorFromUrl(url),
                    name: 'Product (Manual Entry Required)',
                    price: 0,
                    image: '',
                    weight: 5,
                    quantity: 1,
                    deliveryFee: 0,
                    priceConfirmed: false,
                    variant: '',
                    error: true
                };
            }
        }

        function getVendorFromUrl(url) {
            if (url.includes('amazon.com')) return 'amazon';
            if (url.includes('wayfair.com')) return 'wayfair';
            if (url.includes('walmart.com')) return 'walmart';
            if (url.includes('target.com')) return 'target';
            return 'default';
        }

        function getVendorName(vendor) {
            const names = {
                'amazon': 'Amazon',
                'wayfair': 'Wayfair',
                'walmart': 'Walmart',
                'target': 'Target',
                'default': 'Other Store'
            };
            return names[vendor] || 'Other Store';
        }

        async function addProducts() {
            const urls = document.getElementById('productUrls').value.trim().split('\n').filter(url => url.trim());
            
            if (urls.length === 0) {
                showError('error1', 'Please enter at least one product URL');
                return;
            }

            showLoading('loading1', true);
            hideError('error1');

            try {
                for (const url of urls) {
                    if (url.trim()) {
                        const product = await scrapeProduct(url.trim());
                        products.push(product);
                    }
                }

                displayProducts();
                showLoading('loading1', false);
            } catch (error) {
                showLoading('loading1', false);
                showError('error1', 'Error fetching product information. Please try again.');
            }
        }

        function displayProducts() {
            const container = document.getElementById('productList');
            if (products.length === 0) {
                container.innerHTML = '';
                return;
            }

            // Group products by vendor
            const groupedProducts = {};
            products.forEach((product, index) => {
                if (!groupedProducts[product.vendor]) {
                    groupedProducts[product.vendor] = [];
                }
                groupedProducts[product.vendor].push({...product, index});
            });

            let html = '';
            Object.keys(groupedProducts).forEach(vendor => {
                html += `
                    <div class="vendor-group ${vendor}">
                        <div class="vendor-header ${vendor}">${getVendorName(vendor)}</div>
                        ${groupedProducts[vendor].map(product => `
                            <div class="product-item ${vendor} ${product.deleted ? 'deleted' : ''}" data-index="${product.index}">
                                ${product.image ? `<img src="${product.image}" alt="Product" class="product-image" onerror="this.style.display='none'">` : ''}
                                <div class="product-details">
                                    <div class="product-name">
                                        <a href="${product.url}" target="_blank">${product.name}</a>
                                        ${product.variant ? `<span class="product-variant">${product.variant}</span>` : ''}
                                    </div>
                                    <div class="product-info">
                                        <span>Weight: ${product.weight} lbs</span>
                                        <span>Vendor: ${getVendorName(product.vendor)}</span>
                                    </div>
                                    
                                    <div class="quantity-selector">
                                        <span class="quantity-label">Quantity:</span>
                                        <div class="quantity-controls">
                                            <button class="qty-btn" onclick="updateQuantity(${product.index}, -1)">-</button>
                                            <span class="qty-display">${product.quantity}</span>
                                            <button class="qty-btn" onclick="updateQuantity(${product.index}, 1)">+</button>
                                        </div>
                                    </div>

                                    <div class="price-input-section">
                                        <label class="price-input-label ${product.price > 0 ? 'price-found' : 'price-missing'}">
                                            ${product.price > 0 ? 'Price Found' : 'Price Required'} - Please verify and confirm
                                        </label>
                                        <div class="price-input-container">
                                            <div class="price-input">
                                                <span>$</span>
                                                <input type="number" 
                                                       value="${product.price}" 
                                                       step="0.01" 
                                                       min="0"
                                                       class="${product.price > 0 ? 'has-value' : ''} ${product.priceConfirmed ? 'confirmed' : ''}"
                                                       ${product.priceConfirmed ? 'disabled' : ''}
                                                       onchange="updatePrice(${product.index}, this.value)">
                                            </div>
                                            <div class="price-buttons">
                                                <button class="price-btn check-price-btn" onclick="checkPrice(${product.index})">
                                                    Check Price
                                                </button>
                                                <button class="price-btn confirm-price-btn ${product.priceConfirmed ? 'confirmed' : ''}" 
                                                        onclick="confirmPrice(${product.index})"
                                                        ${product.priceConfirmed ? 'disabled' : ''}>
                                                    ${product.priceConfirmed ? '‚úì Confirmed' : 'Confirm Price'}
                                                </button>
                                            </div>
                                        </div>
                                        <div class="price-status ${product.priceConfirmed ? 'confirmed' : (product.price > 0 ? 'pending' : 'required')}">
                                            ${product.priceConfirmed ? 'Price confirmed and locked' : (product.price > 0 ? 'Please confirm this price' : 'Price required to continue')}
                                        </div>
                                    </div>

                                    <div class="product-cost-summary ${product.priceConfirmed ? 'visible' : ''}" id="summary-${product.index}">
                                        <div class="cost-summary-row">
                                            <span>Product Cost:</span>
                                            <span>$${(product.price * product.quantity).toFixed(2)}</span>
                                        </div>
                                        <div class="cost-summary-row">
                                            <span>Estimated Weight:</span>
                                            <span>${(product.weight * product.quantity).toFixed(1)} lbs</span>
                                        </div>
                                        <div class="cost-summary-row">
                                            <span>Ocean Freight:</span>
                                            <span>$${(product.weight * product.quantity * OCEAN_FREIGHT_RATE).toFixed(2)}</span>
                                        </div>
                                        <div class="cost-summary-row">
                                            <span>Customs (25%):</span>
                                            <span>$${(product.price * product.quantity * CUSTOMS_RATE).toFixed(2)}</span>
                                        </div>
                                        <div class="cost-summary-row cost-summary-total">
                                            <span>Product Total:</span>
                                            <span>$${calculateProductTotal(product).toFixed(2)}</span>
                                        </div>
                                    </div>

                                    <button class="delete-product-btn" onclick="deleteProduct(${product.index})">
                                        üóëÔ∏è Remove Product
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            });

            container.innerHTML = html;

            // Add continue button if we have products
            if (products.some(p => !p.deleted)) {
                html += `
                    <div class="button-group" style="margin-top: 30px;">
                        <button onclick="goToPage(2)">Continue to Review ‚Üí</button>
                    </div>
                `;
                container.innerHTML = html;
            }
        }

        function updateQuantity(index, change) {
            if (products[index].deleted) return;
            
            products[index].quantity = Math.max(1, products[index].quantity + change);
            displayProducts();
            updateProductSummary(index);
        }

        function updatePrice(index, newPrice) {
            if (products[index].deleted) return;
            
            products[index].price = parseFloat(newPrice) || 0;
            products[index].priceConfirmed = false;
            
            const input = event.target;
            input.className = input.className.replace('confirmed', '');
            if (products[index].price > 0) {
                input.classList.add('has-value');
            } else {
                input.classList.remove('has-value');
            }
            
            updateProductSummary(index);
        }

        function checkPrice(index) {
            if (products[index].deleted) return;
            
            // Simulate checking price (in real implementation, this would re-scrape)
            alert(`Please verify the price for this product by visiting the product page. Make sure you have selected the correct variant (size, color, etc.) before confirming the price.`);
        }

        function confirmPrice(index) {
            if (products[index].deleted || products[index].price <= 0) return;
            
            products[index].priceConfirmed = true;
            displayProducts();
            updateProductSummary(index);
        }

        function updateProductSummary(index) {
            const summary = document.getElementById(`summary-${index}`);
            if (summary && products[index].priceConfirmed) {
                summary.classList.add('visible');
            } else if (summary) {
                summary.classList.remove('visible');
            }
        }

        function deleteProduct(index) {
            if (confirm('Are you sure you want to remove this product?')) {
                products[index].deleted = true;
                displayProducts();
            }
        }

        function calculateProductTotal(product) {
            if (product.deleted) return 0;
            
            const productCost = product.price * product.quantity;
            const weight = product.weight * product.quantity;
            const freight = weight * OCEAN_FREIGHT_RATE;
            const customs = productCost * CUSTOMS_RATE;
            const deliveryFee = product.deliveryFee || 0;
            
            return productCost + freight + customs + deliveryFee;
        }

        function goToPage(pageNum) {
            // Validation for page 2
            if (pageNum === 2) {
                const activeProducts = products.filter(p => !p.deleted);
                if (activeProducts.length === 0) {
                    showError('error1', 'Please add at least one product before continuing.');
                    return;
                }
                
                const unconfirmedProducts = activeProducts.filter(p => !p.priceConfirmed);
                if (unconfirmedProducts.length > 0) {
                    showError('error1', 'Please confirm prices for all products before continuing.');
                    return;
                }
                
                displayReviewPage();
            }
            
            // Validation for page 3
            if (pageNum === 3) {
                const activeProducts = products.filter(p => !p.deleted);
                const allFeesEntered = activeProducts.every(p => p.deliveryFee !== undefined);
                
                if (!allFeesEntered) {
                    showError('error2', 'Please enter delivery fees for all vendors before proceeding.');
                    return;
                }
                
                displayFinalPage();
            }

            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show target page
            document.getElementById(`page${pageNum}`).classList.add('active');
            currentPage = pageNum;

            // Update progress bar
            updateProgressBar(pageNum);
        }

        function updateProgressBar(currentStep) {
            for (let i = 1; i <= 3; i++) {
                const circle = document.getElementById(`step${i}`);
                const line = document.getElementById(`line${i}`);
                
                if (i < currentStep) {
                    circle.classList.remove('active');
                    circle.classList.add('completed');
                    if (line) line.classList.add('completed');
                } else if (i === currentStep) {
                    circle.classList.remove('completed');
                    circle.classList.add('active');
                } else {
                    circle.classList.remove('active', 'completed');
                    if (line) line.classList.remove('completed');
                }
            }
        }

        function displayReviewPage() {
            const container = document.getElementById('reviewProductList');
            const activeProducts = products.filter(p => !p.deleted);
            
            // Group by vendor for delivery fee input
            const groupedProducts = {};
            activeProducts.forEach(product => {
                if (!groupedProducts[product.vendor]) {
                    groupedProducts[product.vendor] = [];
                }
                groupedProducts[product.vendor].push(product);
            });

            let html = '';
            Object.keys(groupedProducts).forEach(vendor => {
                const vendorProducts = groupedProducts[vendor];
                const vendorTotal = vendorProducts.reduce((sum, p) => sum + (p.price * p.quantity), 0);
                
                html += `
                    <div class="vendor-group ${vendor}">
                        <div class="vendor-header ${vendor}">${getVendorName(vendor)} - $${vendorTotal.toFixed(2)}</div>
                        ${vendorProducts.map(product => `
                            <div class="product-item ${vendor} confirmed">
                                ${product.image ? `<img src="${product.image}" alt="Product" class="product-image">` : ''}
                                <div class="product-details">
                                    <div class="product-name">
                                        <a href="${product.url}" target="_blank">${product.name}</a>
                                        ${product.variant ? `<span class="product-variant">${product.variant}</span>` : ''}
                                    </div>
                                    <div class="product-info">
                                        <span>Quantity: ${product.quantity}</span>
                                        <span>Price: $${product.price.toFixed(2)} each</span>
                                        <span>Total: $${(product.price * product.quantity).toFixed(2)}</span>
                                        <span>Weight: ${(product.weight * product.quantity).toFixed(1)} lbs</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                        
                        <div class="delivery-fee-input ${vendor}">
                            <label>
                                ${getVendorName(vendor)} Delivery Fee to Forwarder
                                <small>Enter the shipping cost from ${getVendorName(vendor)} to our Miami forwarder address</small>
                            </label>
                            <input type="number" 
                                   step="0.01" 
                                   min="0" 
                                   placeholder="0.00"
                                   value="${groupedProducts[vendor][0].deliveryFee || ''}"
                                   onchange="updateDeliveryFee('${vendor}', this.value)">
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            checkProceedButton();
        }

        function updateDeliveryFee(vendor, fee) {
            const deliveryFee = parseFloat(fee) || 0;
            products.forEach(product => {
                if (product.vendor === vendor && !product.deleted) {
                    product.deliveryFee = deliveryFee;
                }
            });
            checkProceedButton();
        }

        function checkProceedButton() {
            const activeProducts = products.filter(p => !p.deleted);
            const allFeesEntered = activeProducts.every(p => p.deliveryFee !== undefined && p.deliveryFee >= 0);
            
            const proceedBtn = document.getElementById('proceedBtn');
            proceedBtn.disabled = !allFeesEntered;
        }

        function displayFinalPage() {
            const container = document.getElementById('finalBreakdown');
            const activeProducts = products.filter(p => !p.deleted);
            
            let totalProductCost = 0;
            let totalWeight = 0;
            let totalDeliveryFees = 0;
            let totalFreight = 0;
            let totalCustoms = 0;

            let html = '<h3>üìä Final Cost Breakdown</h3>';
            
            // Product breakdown
            activeProducts.forEach(product => {
                const productCost = product.price * product.quantity;
                const weight = product.weight * product.quantity;
                const freight = weight * OCEAN_FREIGHT_RATE;
                const customs = productCost * CUSTOMS_RATE;
                
                totalProductCost += productCost;
                totalWeight += weight;
                totalDeliveryFees += product.deliveryFee || 0;
                totalFreight += freight;
                totalCustoms += customs;

                html += `
                    <div class="product-breakdown-item">
                        <div class="product-breakdown-name">${product.name}</div>
                        <div class="product-breakdown-details">
                            <span>Qty: ${product.quantity}</span>
                            <span>Price: $${productCost.toFixed(2)}</span>
                            <span>Weight: ${weight.toFixed(1)} lbs</span>
                            <span>Freight: $${freight.toFixed(2)}</span>
                            <span>Customs: $${customs.toFixed(2)}</span>
                            <span class="product-breakdown-total">Total: $${calculateProductTotal(product).toFixed(2)}</span>
                        </div>
                    </div>
                `;
            });

            const fuelSurcharge = totalFreight * FUEL_SURCHARGE_RATE;
            const grandTotal = totalProductCost + totalDeliveryFees + totalFreight + fuelSurcharge + totalCustoms + PROCESSING_FEE;

            html += `
                <div class="cost-item">
                    <span class="cost-label">Product Costs:</span>
                    <span class="cost-value">$${totalProductCost.toFixed(2)}</span>
                </div>
                <div class="cost-item">
                    <span class="cost-label">US Delivery Fees:</span>
                    <span class="cost-value">$${totalDeliveryFees.toFixed(2)}</span>
                </div>
                <div class="cost-item">
                    <span class="cost-label">Ocean Freight (${totalWeight.toFixed(1)} lbs @ $${OCEAN_FREIGHT_RATE}/lb):</span>
                    <span class="cost-value">$${totalFreight.toFixed(2)}</span>
                </div>
                <div class="cost-item">
                    <span class="cost-label">Fuel Surcharge (15%):</span>
                    <span class="cost-value">$${fuelSurcharge.toFixed(2)}</span>
                </div>
                <div class="cost-item">
                    <span class="cost-label">Bermuda Customs (25%):</span>
                    <span class="cost-value">$${totalCustoms.toFixed(2)}</span>
                </div>
                <div class="cost-item">
                    <span class="cost-label">Processing Fee:</span>
                    <span class="cost-value">$${PROCESSING_FEE.toFixed(2)}</span>
                </div>
                <div class="cost-item total-row">
                    <span class="cost-label">TOTAL COST:</span>
                    <span class="cost-value">$${grandTotal.toFixed(2)}</span>
                </div>
            `;

            container.innerHTML = html;
        }

        function toggleOrderButton() {
            const checkbox = document.getElementById('confirmOrder');
            const orderBtn = document.getElementById('orderBtn');
            const customerInfo = document.getElementById('customerInfo').value.trim();
            
            orderBtn.disabled = !checkbox.checked || !customerInfo;
        }

        function placeOrder() {
            const customerInfo = document.getElementById('customerInfo').value.trim();
            
            if (!customerInfo) {
                showError('error3', 'Please provide your contact information.');
                return;
            }

            showLoading('loading3', true);
            hideError('error3');

            // Simulate order placement
            setTimeout(() => {
                showLoading('loading3', false);
                
                // Create order summary
                const activeProducts = products.filter(p => !p.deleted);
                const orderData = {
                    products: activeProducts,
                    customerInfo: customerInfo,
                    timestamp: new Date().toISOString(),
                    orderTotal: calculateGrandTotal()
                };

                // In a real implementation, this would send to your backend
                console.log('Order placed:', orderData);
                
                alert(`Order placed successfully! 

Order Total: $${calculateGrandTotal().toFixed(2)}

You will receive a confirmation email shortly with order details and payment instructions.

Thank you for choosing SDL Instant Imports!`);
                
                // Reset the form
                resetCalculator();
            }, 2000);
        }

        function calculateGrandTotal() {
            const activeProducts = products.filter(p => !p.deleted);
            let total = PROCESSING_FEE;
            
            activeProducts.forEach(product => {
                total += calculateProductTotal(product);
            });
            
            const totalFreight = activeProducts.reduce((sum, p) => sum + (p.weight * p.quantity * OCEAN_FREIGHT_RATE), 0);
            total += totalFreight * FUEL_SURCHARGE_RATE;
            
            return total;
        }

        function resetCalculator() {
            products = [];
            currentPage = 1;
            document.getElementById('productUrls').value = '';
            document.getElementById('customerInfo').value = '';
            document.getElementById('confirmOrder').checked = false;
            
            goToPage(1);
            displayProducts();
        }

        function showLoading(elementId, show) {
            const element = document.getElementById(elementId);
            if (show) {
                element.classList.add('active');
            } else {
                element.classList.remove('active');
            }
        }

        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.classList.add('active');
        }

        function hideError(elementId) {
            const element = document.getElementById(elementId);
            element.classList.remove('active');
        }

        // Initialize the page
        function initializePage() {
            // Set up event listeners
            document.getElementById('customerInfo').addEventListener('input', toggleOrderButton);
            
            // Initialize progress bar
            updateProgressBar(1);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            initializePage();
        });

        // Start calculator function
        function startCalculator() {
            document.getElementById('introPage').classList.add('hidden');
            document.getElementById('calculatorPage').classList.add('active');
        }
    </script>
</body>
</html>